(function(e){var d=e("body"),g=e("#pageslide");var a=false,f;if(g.length===0){g=e("<div />").attr("id","pageslide").css("display","none").appendTo(e("body"))}function c(i,h){if(i.indexOf("#")===0){e(i).clone(true).appendTo(g.empty()).show()}else{if(h){var j=e("<iframe />").attr({src:i,frameborder:0,hspace:0}).css({width:"100%",height:"100%"});g.html(j)}else{g.load(i)}g.data("localEl",false)}}function b(j,i){var l=g.outerWidth(true),k={},h={};if(g.is(":visible")||a){return}a=true;switch(j){case"left":g.css({left:"auto",right:"-"+l+"px"});k["margin-left"]="-="+l;h.right="+="+l;break;default:g.css({left:"-"+l+"px",right:"auto"});k["margin-left"]="+="+l;h.left="+="+l;break}d.animate(k,i);g.show().animate(h,i,function(){a=false})}e.fn.pageslide=function(h){var i=this;i.click(function(k){var l=e(this),j=e.extend({href:l.attr("href")},h);k.preventDefault();k.stopPropagation();if(g.is(":visible")&&l[0]===f){e.pageslide.close()}else{e.pageslide(j);f=l[0]}})};e.fn.pageslide.defaults={speed:200,direction:"right",modal:false,iframe:true,href:null};e.pageslide=function(h){var i=e.extend({},e.fn.pageslide.defaults,h);if(g.is(":visible")&&g.data("direction")!==i.direction){e.pageslide.close(function(){c(i.href,i.iframe);b(i.direction,i.speed)})}else{c(i.href,i.iframe);if(g.is(":hidden")){b(i.direction,i.speed)}}g.data(i)};e.pageslide.close=function(m){var l=e("#pageslide"),k=l.outerWidth(true),i=l.data("speed"),j={},h={};if(l.is(":hidden")||a){return}a=true;switch(l.data("direction")){case"left":j["margin-left"]="+="+k;h.right="-="+k;break;default:j["margin-left"]="-="+k;h.left="-="+k;break}l.animate(h,i);d.animate(j,i,function(){l.hide();a=false;if(typeof m!=="undefined"){m()}})};g.click(function(h){h.stopPropagation()});e(document).on("click keyup touchmove touchstart",function(h){if(h.type==="keyup"&&h.keyCode!==27){return}if(g.is(":visible")&&!g.data("modal")){e.pageslide.close()}})})(jQuery);
